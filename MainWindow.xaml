<Window x:Class="MyDarkApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        mc:Ignorable="d"
        Title="System Manager Pro" Height="550" Width="900"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <Storyboard x:Key="FadeIn">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:0.5"/>
        </Storyboard>

        <Style x:Key="StatusProgressBar" TargetType="ProgressBar">
            <Setter Property="Background" Value="#1E293B"/>
            <Setter Property="Foreground" Value="#3B82F6"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ProgressBar">
                        <Grid>
                            <Border Background="{TemplateBinding Background}" CornerRadius="8"/>
                            <Border x:Name="PART_Indicator" HorizontalAlignment="Left" Background="{TemplateBinding Foreground}" CornerRadius="8"/>
                            <TextBlock Text="{Binding Value, RelativeSource={RelativeSource TemplatedParent}, StringFormat={}{0:0}%}" 
                                       HorizontalAlignment="Center" VerticalAlignment="Center" 
                                       Foreground="White" FontSize="11" FontWeight="Bold"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="ExtraBold"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <Border x:Name="glow" Background="#3B82F6" CornerRadius="12" Opacity="0">
                                <Border.Effect><BlurEffect Radius="15"/></Border.Effect>
                            </Border>
                            <Border x:Name="border" CornerRadius="12" BorderThickness="1" BorderBrush="#3B82F6" RenderTransformOrigin="0.5,0.5">
                                <Border.RenderTransform><ScaleTransform ScaleX="1" ScaleY="1"/></Border.RenderTransform>
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                        <GradientStop Color="#3B82F6" Offset="0.0"/>
                                        <GradientStop Color="#1D4ED8" Offset="1.0"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="glow" Property="Opacity" Value="0.4"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="RenderTransform">
                                    <Setter.Value><ScaleTransform ScaleX="0.96" ScaleY="0.96"/></Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="KillButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <Border x:Name="glow" Background="#EF4444" CornerRadius="12" Opacity="0">
                                <Border.Effect><BlurEffect Radius="15"/></Border.Effect>
                            </Border>
                            <Border x:Name="border" CornerRadius="12" BorderThickness="1" BorderBrush="#B91C1C" RenderTransformOrigin="0.5,0.5">
                                <Border.RenderTransform><ScaleTransform ScaleX="1" ScaleY="1"/></Border.RenderTransform>
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                        <GradientStop Color="#EF4444" Offset="0.0"/>
                                        <GradientStop Color="#991B1B" Offset="1.0"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="glow" Property="Opacity" Value="0.4"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="RenderTransform">
                                    <Setter.Value><ScaleTransform ScaleX="0.96" ScaleY="0.96"/></Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SearchTextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Grid>
                            <TextBlock x:Name="placeholder" Text="Поиск процесса..." Foreground="#475569" 
                                       VerticalAlignment="Center" Margin="5,0" Visibility="Collapsed" IsHitTestVisible="False"/>
                            <ScrollViewer x:Name="PART_ContentHost"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="Text" Value=""><Setter TargetName="placeholder" Property="Visibility" Value="Visible"/></Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="10">
        <Border x:Name="MainBorder" CornerRadius="24" Background="#0F172A" BorderBrush="#1E293B" BorderThickness="1.5" Opacity="0">
            <Border.Effect><DropShadowEffect BlurRadius="30" Color="Black" ShadowDepth="0" Opacity="0.7"/></Border.Effect>

            <Grid>
                <Grid Margin="25">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1.6*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="0" Margin="0,0,20,0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <TextBlock Text="ПРОЦЕССЫ" Foreground="White" FontSize="24" FontWeight="Black" Margin="0,0,0,20"/>
                        <Border Grid.Row="1" CornerRadius="12" Background="#1E293B" Padding="15,10" Margin="0,0,0,15" BorderBrush="#334155" BorderThickness="1">
                            <TextBox x:Name="SearchBox" Style="{StaticResource SearchTextBoxStyle}" TextChanged="SearchBox_TextChanged"/>
                        </Border>
                        <ListBox Grid.Row="2" x:Name="ProcessList" Background="Transparent" BorderThickness="0" ScrollViewer.VerticalScrollBarVisibility="Hidden">
                            <ListBox.ItemContainerStyle>
                                <Style TargetType="ListBoxItem">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="ListBoxItem">
                                                <Border x:Name="itemBorder" CornerRadius="12" Background="#1E293B" Margin="0,4" Padding="15,12">
                                                    <ContentPresenter />
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True"><Setter TargetName="itemBorder" Property="Background" Value="#334155"/></Trigger>
                                                    <Trigger Property="IsSelected" Value="True"><Setter TargetName="itemBorder" Property="Background" Value="#2563EB"/></Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </ListBox.ItemContainerStyle>
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions><ColumnDefinition Width="Auto"/><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                        <Border Width="36" Height="36" Background="#0F172A" CornerRadius="8" Margin="0,0,15,0"><TextBlock Text="⚙" Foreground="#3B82F6" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="18"/></Border>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding ProcessName}" Foreground="White" FontWeight="Bold" FontSize="14"/>
                                            <TextBlock Text="System Active" Foreground="#64748B" FontSize="10"/>
                                        </StackPanel>
                                        <Border Grid.Column="2" Background="#0F172A" Padding="8,4" CornerRadius="6" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding Id, StringFormat='PID: {0}'}" Foreground="#94A3B8" FontSize="11" FontWeight="Bold"/>
                                        </Border>
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Grid>

                    <Grid Grid.Column="1">
                        <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="*"/><RowDefinition Height="Auto"/></Grid.RowDefinitions>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Content="—" Click="Minimize_Click" Background="Transparent" BorderThickness="0" Foreground="#64748B" FontSize="20" Padding="8"/>
                            <Button Content="✕" Click="Close_Click" Background="Transparent" BorderThickness="0" Foreground="#EF4444" FontSize="20" Margin="10,0,0,0" Padding="8"/>
                        </StackPanel>
                        <StackPanel Grid.Row="1" VerticalAlignment="Center">
                            <Grid HorizontalAlignment="Center" Margin="0,0,0,25">
                                <Ellipse Width="105" Height="105" Stroke="#3B82F6" StrokeThickness="2"/>
                                <Ellipse Width="96" Height="96"><Ellipse.Fill><ImageBrush x:Name="AvatarImage" ImageSource="https://cdn.discordapp.com/embed/avatars/0.png"/></Ellipse.Fill></Ellipse>
                            </Grid>
                            <TextBlock x:Name="DiscordUserText" Text="ЗАГРУЗКА..." Foreground="White" FontSize="16" FontWeight="Black" HorizontalAlignment="Center" Margin="0,0,0,30"/>
                            <TextBlock Text="ЦП" Foreground="#64748B" FontSize="10" FontWeight="Bold" Margin="2,0,0,5"/>
                            <ProgressBar x:Name="CpuBar" Height="22" Style="{StaticResource StatusProgressBar}" Margin="0,0,0,15"/>
                            <TextBlock Text="ОЗУ" Foreground="#64748B" FontSize="10" FontWeight="Bold" Margin="2,0,0,5"/>
                            <ProgressBar x:Name="RamBar" Height="22" Style="{StaticResource StatusProgressBar}" Foreground="#8B5CF6"/>
                        </StackPanel>
                        <StackPanel Grid.Row="2">
                            <Button Content="ОБНОВИТЬ СПИСОК" Style="{StaticResource ModernButton}" Height="50" Margin="0,5" Click="Refresh_Click"/>
                            <Button Content="ЗАВЕРШИТЬ ПРОЦЕСС" Style="{StaticResource KillButton}" Height="50" Margin="0,5" Click="Kill_Click"/>
                        </StackPanel>
                    </Grid>
                </Grid>

                <Border x:Name="LoadingGrid" Background="#0F172A" CornerRadius="23" Visibility="Visible" Panel.ZIndex="100">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock Text="SYSTEM MANAGER" Foreground="#3B82F6" FontSize="32" FontWeight="Black" HorizontalAlignment="Center">
                            <TextBlock.Effect><DropShadowEffect BlurRadius="10" Color="#3B82F6" Opacity="0.5" ShadowDepth="0"/></TextBlock.Effect>
                        </TextBlock>
                        <ProgressBar IsIndeterminate="True" Width="200" Height="4" Margin="0,30" Background="#1E293B" Foreground="#3B82F6" BorderThickness="0"/>
                        <TextBlock x:Name="StatusText" Text="Сбор данных..." Foreground="#64748B" FontSize="14" HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
    </Grid>
</Window>